<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <title>Smart Home</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

    <!-- NAVBAR -->
    <nav class="z-depth-0 grey lighten-4">
        <div class="nav-wrapper container">
            <a href="#" class="brand-logo">
                <a href="index.html"><img src="img/logo.png" style="width: 300px; margin-top: 10px;"></a>
            </a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li class="logged-in">
                    <a href="#" class="grey-text modal-trigger" data-target="modal-account">Account</a>
                </li>
                <li class="logged-in">
                    <a href="#" class="grey-text" id="logout">Logout</a>
                </li>
                </span>
            </ul>
        </div>
    </nav>

    <!-- SIGN UP MODAL not available: it is supposed you are registered and logged in to enter this page-->

    <!--Login modal not avaible: it is supposed you are logged in to enter this page-->

    <!-- ACCOUNT MODAL -->
    <div id="modal-account" class="modal fade">
        <div class="modal-content center-align">
            <h4>Account details</h4><br/>
            <div class="account-details">
                <ul class="collapsible z-depth-0 accinfo" style="border: none;">
                </ul>
            </div>
        </div>
    </div>


    <!-- ERRORS MODAL -->
    <div id="modal-error" class="modal fade">
        <div class="modal-content center-align">
            <h4>Oops! An error ocurred somewhere</h4><br/>
            <div class="error-details">
                <p style="alignment: center">Please make sure the introduced data is correct.</p>
                <button type="button" class="btn btn-default" style="float: right" data-dismiss="modal-addHome" onclick="$('#modal-error').hide()">CLOSE</button>
            </div>
        </div>
    </div>


    <a href="index.html"><button>HEY!</button></a>

    <!-- NO ESTIC SEGUR SI CAL FOTRE LO DE FIREBASE TMB AQUI, TODO: REVISAR-->
    <!-- Firebase scripts -->
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase-functions.js"></script>
    <script>
        // Initialize Firebase project
        var config = { //use security rules later to protect the project!!
            apiKey: "AIzaSyDlOnhzfQbFGOf6lKQRGuPpqIVAqc4wUuY",
            authDomain: "pti-iot.firebaseapp.com",
            databaseURL: "https://pti-iot.firebaseio.com",
            projectId: "pti-iot"
            //No necessitem aquests de moment
            //storageBucket: "pti-iot.appspot.com",
            //messagingSenderId: "839726974850"
        };
        firebase.initializeApp(config);

        //make auth and firestore references
        const auth = firebase.auth();
        const database = firebase.firestore();
        const functions = firebase.functions();
    </script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/index.js"></script>

    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>

    <script type="text/javascript">
        // FirebaseUI config.
        var uiConfig = {
            signInSuccessUrl: '/',
            signInOptions: [
                // Leave the lines as is for the providers you want to offer your users.
                firebase.auth.GoogleAuthProvider.PROVIDER_ID
            ],

            // tosUrl and privacyPolicyUrl accept either url string or a callback
            // function.
            // Terms of service url/callback.
            tosUrl: '<your-tos-url>',
            // Privacy policy url/callback.
            privacyPolicyUrl: function() {
                window.location.assign('<your-privacy-policy-url>');
            }
        };

        // Initialize the FirebaseUI Widget using Firebase.
        var ui = new firebaseui.auth.AuthUI(firebase.auth());
        // The start method will wait until the DOM is loaded.
        ui.start('#firebaseui-auth-container', uiConfig);
    </script>
</body>
</html>